;各種定義値(ABL, EXP, SOURCE)の並び設定を行う

;-------------------------------------------------
;ABLの並び設定
;並び替えたABLの中から、ARG:0番目に対応するABLの実際の番号を返す
;-------------------------------------------------
@GET_SORTED_ABL(ARG:0)
#FUNCTION
SELECTCASE ARG:0
	CASE 0
		RETURNF 12
	CASE 1
		RETURNF 13
	CASE 2
		RETURNF 14
	CASE 3
		RETURNF 0
	CASE 4
		RETURNF 1
	CASE 5
		RETURNF 2
	CASE 6
		RETURNF 3
	CASE 7
		RETURNF 4
	CASE 8
		RETURNF 20
	CASE 9
		RETURNF 21
	CASE 10
		RETURNF 22
	CASE 11
		RETURNF 23
	CASE 12
		RETURNF 24
	CASE 13
		RETURNF 33
	CASE 14
		RETURNF 34
	CASE 15
		RETURNF 25
	CASE 16
		RETURNF 26
	CASE 17
		RETURNF 27
	CASE 18
		RETURNF 28
	CASE 19
		RETURNF 29
	CASE 20
		RETURNF 30
ENDSELECT
RETURNF -1

;-------------------------------------------------
;ABLの並び設定
;並び替えたABLの中から、ARG:0番目に対応するExの実際の番号を返す
;-------------------------------------------------
@GET_SORTED_ABL_H(ARG:0)
#FUNCTION
SELECTCASE ARG:0
	CASE 0
		RETURNF 0
	CASE 1
		RETURNF 1
	CASE 2
		RETURNF 2
	CASE 3
		RETURNF 3
	CASE 4
		RETURNF 4
	CASE 5
		RETURNF 8
	CASE 6
		RETURNF 5
	CASE 7
		RETURNF 6
	CASE 8
		RETURNF 7
	CASE 9 TO 1000
		RETURNF (ARG:0)
ENDSELECT
RETURNF -1

;-------------------------------------------------
;EXPの並び設定
;並び替えたEXPの中から、ARG:0番目に対応するEXPの実際の番号を返す
;-------------------------------------------------
@GET_SORTED_EXP(ARG:0)
#FUNCTION
SELECTCASE ARG:0
	CASE 0
		RETURNF 40
	CASE 1
		RETURNF 41
	CASE 2
		RETURNF 42
	CASE 3
		RETURNF 43
	CASE 4
		RETURNF 44
	CASE 5
		RETURNF 45
	CASE 6
		RETURNF 46
	CASE 7
		RETURNF 47
	CASE 8
		RETURNF 48
	CASE 9
		RETURNF 50
	CASE 10
		RETURNF 51
	CASE 11
		RETURNF 52
	CASE 12
		RETURNF 90
	CASE 13
		RETURNF 91
	CASE 14
		RETURNF 92
	CASE 15
		RETURNF 93
	CASE 16
		RETURNF 94
	CASE 17
		RETURNF 97
	CASE 18
		RETURNF 55
	CASE 19
		RETURNF 56
	CASE 20
		RETURNF GETNUM(EXP, "孕ませ経験")
	CASE 21
		RETURNF GETNUM(EXP, "妊娠経験")
	CASE 22
		RETURNF 57
	CASE 23
		RETURNF 58
	CASE 24
		RETURNF 59
	CASE 25
		RETURNF 61
	CASE 26
		RETURNF 62
	CASE 27
		RETURNF 63
	CASE 28
		RETURNF 64
	CASE 29
		RETURNF 65
	CASE 30
		RETURNF 66
	CASE 31
		RETURNF GETNUM(EXP, "催眠絶頂経験")
	CASE 32
		RETURNF GETNUM(EXP, "ＮＴＲ経験")
ENDSELECT
RETURNF -1

;-------------------------------------------------
;SOURCEの並び設定
;並び替えたSOURCEの中から、ARG:0番目に対応するSOURCEの実際の番号を返す
;-------------------------------------------------
@GET_SORTED_SOURCE(ARG:0)
#FUNCTION
SELECTCASE ARG:0
	CASE 0
		RETURNF 0
	CASE 1
		RETURNF 1
	CASE 2
		RETURNF 2
	CASE 3
		RETURNF 3
	CASE 4
		RETURNF 4
	CASE 5
		RETURNF 9
	CASE 6
		RETURNF 8
	CASE 7
		RETURNF 10
	CASE 8
		RETURNF 11
	CASE 9
		RETURNF 12
	CASE 10
		RETURNF 13
	CASE 11
		RETURNF 14
	CASE 12
		RETURNF 15
	CASE 13
		RETURNF 16
	CASE 14
		RETURNF 17
	CASE 15
		RETURNF 18
	CASE 16
		RETURNF 19
	CASE 17
		RETURNF 20
	CASE 18
		RETURNF 21
	CASE 19
		RETURNF 22
	CASE 20
		RETURNF 23
	CASE 21
		RETURNF 24
	CASE 22
		RETURNF 25
	CASE 23
		RETURNF 26
	CASE 24
		RETURNF 27
	CASE 25
		RETURNF 28
	CASE 26
		RETURNF 29
	CASE 27
		RETURNF 31
	CASE 28
		RETURNF 32
	CASE 29
		RETURNF 33
	CASE 30
		RETURNF 30
	CASE 31
		RETURNF 40
	CASE 32
		RETURNF 41
	CASE 33
		RETURNF 50
	CASE 34
		RETURNF 51
ENDSELECT
RETURNF -1

;Fisher-Yatesアルゴリズムによるシャッフル配列の作成
;専用配列SHAFFLE_ARRAYを使用
;引数 0:配列の長さ（0～ARG:0-1までのシャッフル） 
;
@FISHER_YATES_SHAFFLE(ARG:0)

SIF !INRANGE(ARG:0, 1, 5000)
	THROW 引数が異常です。1～5000の範囲で指定してください。

;SHAFFLE_ARRAYの初期化
VARSET SHAFFLE_ARRAY , 0
FOR LOCAL:0 , 0, ARG:0
	SHAFFLE_ARRAY:(LOCAL:0) = LOCAL:0
NEXT
;シャッフル処理
;先頭から順番に「自身以降のいずれかと入れ替えて固定する」を行う
FOR LOCAL:0 , 0 , ARG:0 - 1
	LOCAL:1 = RAND(LOCAL:0 , ARG:0)
	SWAP SHAFFLE_ARRAY:(LOCAL:0), SHAFFLE_ARRAY:(LOCAL:1)
NEXT

;終端フラグセット
SHAFFLE_ARRAY:(ARG:0) = -1
RETURN 0
