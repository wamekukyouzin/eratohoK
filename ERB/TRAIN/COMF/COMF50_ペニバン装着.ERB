;ペニバン装着

;-------------------------------------------------
;コマンド名称
;-------------------------------------------------
@COM_NAME50
LOCALS:0 = ペニバン
IF MTAR_NUM > 0
	RESULTS:0 = %LOCALS:0%装着を見せつける
	RESULTS:1 = %LOCALS:0%装着させられる
	RESULTS:2 = %LOCALS:0%装着させる
	RESULTS:3 = %LOCALS:0%装着を見せつけられる
	RESULTS:4 = %LOCALS:0%装着させる
	RESULTS:5 = %LOCALS:0%装着見せつけ
ELSE
	RESULTS:0 = %LOCALS:0%をつける
ENDIF

;-------------------------------------------------
;選択可否判定
;-------------------------------------------------
@COM_ABLE50
;共通部分
CALL COM_ABLE_COMMON(50)
SIF RESULT == 0
	RETURN 0
;プレイヤーは1人以上必要
SIF MPLY_NUM <= 0 
	RETURN 0
FOR LOCAL, 0, MPLY_NUM
	;プレイヤーが行動不能なら不可
	SIF !IS_PLAYABLE(MPLY:LOCAL) && !FLAG:RECHECKING
		RETURN 0
	;プレイヤーが拘束中なら不可
	SIF IS_BIND(MPLY:LOCAL)
		RETURN 0
	;プレイヤーに元から竿があるなら不可
	SIF HAS_PENIS(MPLY:LOCAL)
		RETURN 0
	;ペニスバンドが必要
	SIF ITEM:ペニスバンド == 0 && ITEM:A_ペニスバンド == 0
		RETURN 0
    ;already equipped
    SIF IS_EQUIP_PLAYER(MPLY:(LOCAL:0), 50)
		RETURN 0
NEXT
RETURN 1

;-------------------------------------------------
;メイン処理
;-------------------------------------------------
@COM50
PRINTFORMW %ANAME(MPLY:0)%\@ MPLY_NUM > 1 ? たち # \@はペニスバンドを装着した…

RETURN 1

;-------------------------------------------------
;地の文(前文)
;-------------------------------------------------
@COM_TEXT_BEFORE50

;-------------------------------------------------
;継続コマンドかどうかを設定
;-------------------------------------------------
@COM_IS_EQUIP50
;継続コマンドかつフィルタリング不可
RETURN 2

;-------------------------------------------------
;継続状態の処理
;-------------------------------------------------
@COM_EQUIP50(ARG:0)
;特になし

;-------------------------------------------------
;継続中の表示
;-------------------------------------------------
@EQUIP_MESSAGE50(ARG:0)
RESULTS = %EQUIP_PLAYER_ANAME(ARG:0)%がペニバンを装着中

;-------------------------------------------------
;継続を解除する前にやらなくちゃならんこと
;-------------------------------------------------
@COM_BEFORE_RELEASE_EQUIP50(ARG:0)
;挿入状態をクリアする
FOR LOCAL, 0, MEQUIP_PLAYER_NUM:(ARG:0)
	CALL CLEAR_INSERT_FLAG(MEQUIP_PLAYER:(ARG:0):LOCAL, "Ｐ")
NEXT


;-------------------------------------------------
;継続中の地の文(前文)
;-------------------------------------------------
@COM_TEXT_BEFORE_EQUIP50(ARG:0)

;-------------------------------------------------
;継続を解除したときの地の文
;-------------------------------------------------
@COM_TEXT_RELEASE_EQUIP50(ARG:0)
PRINTFORMW %EQUIP_PLAYER_ANAME(ARG:0)%のペニスバンドを外した

;-------------------------------------------------

;コマンド区分
;-------------------------------------------------

@COM_AVAILABLE_WHEN50
RETURN コマンド_ウフフ

;--------------------
;性嗜好用関数
;--------------------
@COM_PREFERENCE_PLAYER_50()
RETURN POWER(2, 性的嗜好_性交したい)

@COM_PREFERENCE_TARGET_50()
RETURN POWER(2, 性的嗜好_性交されたい)

