;経験値のみによる能力上昇(SLG能力)

;-------------------------------------------------
;武闘
;-------------------------------------------------
@ABLUP_EXPNAME50
RESULTS = 武闘経験値

@CALC_ABLUP_EXP50(ARG:0)
;最大値は300
IF ABL:(ARG:0):武闘 >= 300
	RETURN -1
ENDIF

LOCAL:0 = ABLUP_NEED_EXP_SLG(ABL:(ARG:0):武闘) / GROWTYPE_RATE(ARG:0, "武闘")

SIF FIND_PASSIVE_SKILL(ARG:0, "超成長力")
	TIMES LOCAL:0, 0.80

SIF ID_TO_CHARA(FLAG:お気に入り指定キャラ) == ARG:0
	TIMES LOCAL:0, 0.80

IF TALENT:(ARG:0):サボり魔
	SELECTCASE ABL:(ARG:0):武闘
		CASE IS >= 90
			TIMES LOCAL:0, 1.50
		CASE IS >= 80
			TIMES LOCAL:0, 1.25
		CASEELSE
			TIMES LOCAL:0, 1.1
	ENDSELECT
ENDIF
RETURN MAX(LOCAL:0, 1)

;-------------------------------------------------
;防衛
;-------------------------------------------------
@ABLUP_EXPNAME51
RESULTS = 防衛経験値

@CALC_ABLUP_EXP51(ARG:0)
;最大値は300
IF ABL:(ARG:0):防衛 >= 300
	RETURN -1
ENDIF

LOCAL:0 = ABLUP_NEED_EXP_SLG(ABL:(ARG:0):防衛) / GROWTYPE_RATE(ARG:0, "防衛")

SIF FIND_PASSIVE_SKILL(ARG:0, "超成長力")
	TIMES LOCAL:0, 0.80

SIF ID_TO_CHARA(FLAG:お気に入り指定キャラ) == ARG:0
	TIMES LOCAL:0, 0.80

IF TALENT:(ARG:0):サボり魔
	SELECTCASE ABL:(ARG:0):防衛
		CASE IS >= 90
			TIMES LOCAL:0, 1.50
		CASE IS >= 80
			TIMES LOCAL:0, 1.25
		CASEELSE
			TIMES LOCAL:0, 1.1
	ENDSELECT
ENDIF
RETURN MAX(LOCAL:0, 1)


;-------------------------------------------------
;知略
;-------------------------------------------------
@ABLUP_EXPNAME52
RESULTS = 知略経験値

@CALC_ABLUP_EXP52(ARG:0)
;最大値は300
IF ABL:(ARG:0):知略 >= 300
	RETURN -1
ENDIF

LOCAL:0 = ABLUP_NEED_EXP_SLG(ABL:(ARG:0):知略) / GROWTYPE_RATE(ARG:0, "知略")

SIF FIND_PASSIVE_SKILL(ARG:0, "超成長力")
	TIMES LOCAL:0, 0.80

SIF ID_TO_CHARA(FLAG:お気に入り指定キャラ) == ARG:0
	TIMES LOCAL:0, 0.80

IF TALENT:(ARG:0):サボり魔
	SELECTCASE ABL:(ARG:0):知略
		CASE IS >= 90
			TIMES LOCAL:0, 1.50
		CASE IS >= 80
			TIMES LOCAL:0, 1.25
		CASEELSE
			TIMES LOCAL:0, 1.1
	ENDSELECT
ENDIF
RETURN MAX(LOCAL:0, 1)

;-------------------------------------------------
;政治
;-------------------------------------------------
@ABLUP_EXPNAME53
RESULTS = 政治経験値

@CALC_ABLUP_EXP53(ARG:0)
;最大値は300
IF ABL:(ARG:0):政治 >= 300
	RETURN -1
ENDIF

LOCAL:0 = ABLUP_NEED_EXP_SLG(ABL:(ARG:0):政治) / GROWTYPE_RATE(ARG:0, "政治")

SIF FIND_PASSIVE_SKILL(ARG:0, "超成長力")
	TIMES LOCAL:0, 0.80

SIF ID_TO_CHARA(FLAG:お気に入り指定キャラ) == ARG:0
	TIMES LOCAL:0, 0.80

IF TALENT:(ARG:0):サボり魔
	SELECTCASE ABL:(ARG:0):政治
		CASE IS >= 90
			TIMES LOCAL:0, 1.50
		CASE IS >= 80
			TIMES LOCAL:0, 1.25
		CASEELSE
			TIMES LOCAL:0, 1.1
	ENDSELECT
ENDIF
RETURN MAX(LOCAL:0, 1)

;-------------------------------------------------
;妖術
;-------------------------------------------------
@ABLUP_EXPNAME54
RESULTS = 妖術経験値

@CALC_ABLUP_EXP54(ARG:0)
;最大値は300
IF ABL:(ARG:0):妖術 >= 300
	RETURN -1
ENDIF

LOCAL:0 = ABLUP_NEED_EXP_SLG(ABL:(ARG:0):妖術) * 5 / GROWTYPE_RATE(ARG:0, "妖術")

SIF FIND_PASSIVE_SKILL(ARG:0, "超成長力")
	TIMES LOCAL:0, 0.80

SIF ID_TO_CHARA(FLAG:お気に入り指定キャラ) == ARG:0
	TIMES LOCAL:0, 0.80

IF TALENT:(ARG:0):サボり魔
	SELECTCASE ABL:(ARG:0):妖術
		CASE IS >= 50
			TIMES LOCAL:0, 1.50
		CASE IS >= 30
			TIMES LOCAL:0, 1.25
		CASEELSE
			TIMES LOCAL:0, 1.1
	ENDSELECT
ENDIF
RETURN MAX(LOCAL:0, 1)

;-------------------------------------------------
;歌唱
;-------------------------------------------------
@ABLUP_EXPNAME60
RESULTS = 歌唱経験値

@CALC_ABLUP_EXP60(ARG:0)
;最大値は300
IF ABL:(ARG:0):歌唱 >= 300
	RETURN -1
ENDIF

LOCAL:0 = ABLUP_NEED_EXP_SLG(ABL:(ARG:0):歌唱) / GROWTYPE_RATE(ARG:0, "歌唱")

SIF FIND_PASSIVE_SKILL(ARG:0, "超成長力")
	TIMES LOCAL:0, 0.80

SIF ID_TO_CHARA(FLAG:お気に入り指定キャラ) == ARG:0
	TIMES LOCAL:0, 0.80

IF TALENT:(ARG:0):サボり魔
	SELECTCASE ABL:(ARG:0):歌唱
		CASE IS >= 50
			TIMES LOCAL:0, 1.50
		CASE IS >= 30
			TIMES LOCAL:0, 1.25
		CASEELSE
			TIMES LOCAL:0, 1.1
	ENDSELECT
ENDIF

RETURN MAX(LOCAL:0, 1)

;-------------------------------------------------
;料理
;-------------------------------------------------
@ABLUP_EXPNAME61
RESULTS = 料理経験値

@CALC_ABLUP_EXP61(ARG:0)
;最大値は300
IF ABL:(ARG:0):料理 >= 300
	RETURN -1
ENDIF

LOCAL:0 = ABLUP_NEED_EXP_SLG(ABL:(ARG:0):料理) / GROWTYPE_RATE(ARG:0, "料理")

SIF FIND_PASSIVE_SKILL(ARG:0, "超成長力")
	TIMES LOCAL:0, 0.80

SIF ID_TO_CHARA(FLAG:お気に入り指定キャラ) == ARG:0
	TIMES LOCAL:0, 0.80

IF TALENT:(ARG:0):サボり魔
	SELECTCASE ABL:(ARG:0):料理
		CASE IS >= 50
			TIMES LOCAL:0, 1.50
		CASE IS >= 30
			TIMES LOCAL:0, 1.25
		CASEELSE
			TIMES LOCAL:0, 1.1
	ENDSELECT
ENDIF

RETURN MAX(LOCAL:0, 1)

;-------------------------------------------------
;能力レベルARG:0に対する必要経験値(×100)を返す関数(SLG系)
;-------------------------------------------------
@ABLUP_NEED_EXP_SLG(ARG:0)
#FUNCTION
SELECTCASE ARG:0
	CASE IS >= 120
		RETURNF 7000 + (ARG:0 - 120) * 600
	CASE IS >= ランク閾値:ランク_ＳＬＧ:ランク_S
		RETURNF 4000 + (ARG:0 - 100) * 150
	CASE IS >= ランク閾値:ランク_ＳＬＧ:ランク_A
		RETURNF 2000 + (ARG:0 - 80) * 100
	CASE IS >= ランク閾値:ランク_ＳＬＧ:ランク_C
		RETURNF 600 + (ARG:0 - 60) * 70 
	CASE IS >= ランク閾値:ランク_ＳＬＧ:ランク_F
		RETURNF 300 + (ARG:0 - 30) * 10
	CASEELSE
		RETURNF 300
ENDSELECT
