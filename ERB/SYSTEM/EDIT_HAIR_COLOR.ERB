@EDIT_HAIR_COLOR(対象)
#DIM FIRST_LINE
#DIM 対象
#DIM HAIR_RGB, 3
#DIM HAIR_HSV, 3
#DIM CREDRAW

CREDRAW = CURRENTREDRAW()
REDRAW 0

$SHOW_LOOP

FIRST_LINE = LINECOUNT

HAIR_RGB:0 = (TALENT:対象:髪色 >> 16) & 0xFF
HAIR_RGB:1 = (TALENT:対象:髪色 >> 8) & 0xFF
HAIR_RGB:2 = TALENT:対象:髪色 & 0xFF

HAIR_HSV:0 = RGB_TO_H(TALENT:対象:髪色)
HAIR_HSV:1 = RGB_TO_S(TALENT:対象:髪色)
HAIR_HSV:2 = RGB_TO_V(TALENT:対象:髪色)

CALL SINGLE_DRAWLINE
PRINTFORML %ANAME(対象)%の髪色を設定します
CALL SINGLE_DRAWLINE

PRINTFORM 現在の髪色:

CALL PRINT_HAIR_COLOR(TALENT:対象:髪色)
PRINTL

IF TALENT:対象:髪色 != 0
	PRINTFORML H:{HAIR_HSV:0, 3} S:{HAIR_HSV:1, 3} V:{HAIR_HSV:2, 3}
	PRINTFORML R:{HAIR_RGB:0, 3} G:{HAIR_RGB:1, 3} B:{HAIR_RGB:2, 3}
ENDIF

CALL SINGLE_DRAWLINE

PRINTBUTTON @"\@ TALENT:対象:髪色 == 0 ? [不明でなくす] # [不明にする]\@", 0
PRINTL

CALL SINGLE_DRAWLINE

SIF TALENT:対象:髪色 == 0
	GOTO INPUT_LOOP

PRINT
PRINTBUTTON "[色相+10]", 10
PRINT  
PRINTBUTTON "[色相-10]", 11
PRINT  
PRINTBUTTON "[彩度+5]", 20
PRINT  
PRINTBUTTON "[彩度-5]", 21
PRINT  
PRINTBUTTON "[明度+5]", 30
PRINT  
PRINTBUTTON "[明度-5]", 31
PRINTL

CALL SINGLE_DRAWLINE

PRINTBUTTON "[R + 10]", 40
PRINT  
PRINTBUTTON "[R - 10]", 41
PRINT  
PRINTBUTTON "[R入力]", 42
PRINT  
PRINTBUTTON "[G + 10]", 50
PRINT  
PRINTBUTTON "[G - 10]", 51
PRINT  
PRINTBUTTON "[G入力]", 52
PRINT  
PRINTBUTTON "[B + 10]", 60
PRINT  
PRINTBUTTON "[B - 10]", 61
PRINT  
PRINTBUTTON "[B入力]", 62
PRINTL
CALL SINGLE_DRAWLINE
PRINTBUTTON "[カラーコード]", 100
CALL SINGLE_DRAWLINE
PRINTBUTTON "[戻る]", 999

$INPUT_LOOP
INPUT

SELECTCASE RESULT
	CASE 999
		REDRAW CREDRAW
		RETURN
	CASE 0
		TALENT:対象:髪色 = !TALENT:対象:髪色
	CASE 10
		HAIR_HSV:0 += 10
		IF HAIR_HSV:0 >= 360
			HAIR_HSV:0 -= 360
		ENDIF
   		TALENT:対象:髪色 = HSV_TO_RGB(HAIR_HSV:0, HAIR_HSV:1, HAIR_HSV:2)
	CASE 11
		HAIR_HSV:0 -= 10
		IF HAIR_HSV:0 <= 360
			HAIR_HSV:0 += 360
		ENDIF
   		TALENT:対象:髪色 = HSV_TO_RGB(HAIR_HSV:0, HAIR_HSV:1, HAIR_HSV:2)
	CASE 20
		HAIR_HSV:1 = LIMIT(HAIR_HSV:1 + 5, 0, 95)
		TALENT:対象:髪色 = HSV_TO_RGB(HAIR_HSV:0, HAIR_HSV:1, HAIR_HSV:2)
	CASE 21
		HAIR_HSV:1 = LIMIT(HAIR_HSV:1 - 5, 0, 95)
		TALENT:対象:髪色 = HSV_TO_RGB(HAIR_HSV:0, HAIR_HSV:1, HAIR_HSV:2)
	CASE 30
		HAIR_HSV:2 = LIMIT(HAIR_HSV:2 + 5, 30, 100)
		TALENT:対象:髪色 = HSV_TO_RGB(HAIR_HSV:0, HAIR_HSV:1, HAIR_HSV:2)
	CASE 31
		HAIR_HSV:2 = LIMIT(HAIR_HSV:2 - 5, 30, 100)
		TALENT:対象:髪色 = HSV_TO_RGB(HAIR_HSV:0, HAIR_HSV:1, HAIR_HSV:2)
	CASE 40
		HAIR_RGB:0 = LIMIT(HAIR_RGB:0 + 10, 0, 255)
		TALENT:対象:髪色 = (HAIR_RGB:0 << 16) + (HAIR_RGB:1 << 8) + HAIR_RGB:2
	CASE 41
		HAIR_RGB:0 = LIMIT(HAIR_RGB:0 - 10, 0, 255)
		TALENT:対象:髪色 = (HAIR_RGB:0 << 16) + (HAIR_RGB:1 << 8) + HAIR_RGB:2
	CASE 42
		PRINTFORML 0～255の範囲で入力
		INPUT
		HAIR_RGB:0 = LIMIT(RESULT, 0, 255)
		TALENT:対象:髪色 = (HAIR_RGB:0 << 16) + (HAIR_RGB:1 << 8) + HAIR_RGB:2
	CASE 50
		HAIR_RGB:1 = LIMIT(HAIR_RGB:1 + 10, 0, 255)
		TALENT:対象:髪色 = (HAIR_RGB:0 << 16) + (HAIR_RGB:1 << 8) + HAIR_RGB:2
	CASE 51
		HAIR_RGB:1 = LIMIT(HAIR_RGB:1 - 10, 0, 255)
		TALENT:対象:髪色 = (HAIR_RGB:0 << 16) + (HAIR_RGB:1 << 8) + HAIR_RGB:2
	CASE 52
		PRINTFORML 0～255の範囲で入力
		INPUT
		HAIR_RGB:1 = LIMIT(RESULT, 0, 255)
		TALENT:対象:髪色 = (HAIR_RGB:0 << 16) + (HAIR_RGB:1 << 8) + HAIR_RGB:2
	CASE 60
		HAIR_RGB:2 = LIMIT(HAIR_RGB:2 + 10, 0, 255)
		TALENT:対象:髪色 = (HAIR_RGB:0 << 16) + (HAIR_RGB:1 << 8) + HAIR_RGB:2
	CASE 61
		HAIR_RGB:2 = LIMIT(HAIR_RGB:2 - 10, 0, 255)
		TALENT:対象:髪色 = (HAIR_RGB:0 << 16) + (HAIR_RGB:1 << 8) + HAIR_RGB:2
	CASE 62
		PRINTFORML 0～255の範囲で入力
		INPUT
		HAIR_RGB:2 = LIMIT(RESULT, 0, 255)
		TALENT:対象:髪色 = (HAIR_RGB:0 << 16) + (HAIR_RGB:1 << 8) + HAIR_RGB:2
	CASE 100
		PRINTFORML 000000～FFFFFFの範囲で入力
		INPUT
		SIF ISNUMERIC("0x" + RESULTS) && INRANGE(TOINT("0x" + RESULTS), 0, TOINT("0xFFFFFF"))
			TALENT:対象:髪色 = TOINT("0x" + RESULTS)
ENDSELECT

CLEARLINE LINECOUNT - FIRST_LINE

GOTO SHOW_LOOP